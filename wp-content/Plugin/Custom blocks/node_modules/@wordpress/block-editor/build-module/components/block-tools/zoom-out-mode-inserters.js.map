{"version":3,"names":["useSelect","useDispatch","useEffect","useState","BlockPopoverInbetween","ZoomOutModeInserterButton","store","blockEditorStore","unlock","jsx","_jsx","ZoomOutModeInserters","isReady","setIsReady","hasSelection","insertionPoint","blockOrder","blockInsertionPointVisible","setInserterIsOpened","sectionRootClientId","selectedBlockClientId","select","getSettings","getInsertionPoint","getBlockOrder","getSelectionStart","getSelectedBlockClientId","getSectionRootClientId","isBlockInsertionPointVisible","root","clientId","__experimentalSetIsInserterOpened","showInsertionPoint","timeout","setTimeout","clearTimeout","undefined","map","index","shouldRenderInsertionPoint","previousClientId","nextClientId","isSelected","children","onClick","rootClientId","insertionIndex","tab","category","operation"],"sources":["@wordpress/block-editor/src/components/block-tools/zoom-out-mode-inserters.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport ZoomOutModeInserterButton from './zoom-out-mode-inserter-button';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction ZoomOutModeInserters() {\n\tconst [ isReady, setIsReady ] = useState( false );\n\tconst {\n\t\thasSelection,\n\t\tinsertionPoint,\n\t\tblockOrder,\n\t\tblockInsertionPointVisible,\n\t\tsetInserterIsOpened,\n\t\tsectionRootClientId,\n\t\tselectedBlockClientId,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetInsertionPoint,\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSectionRootClientId,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst root = getSectionRootClientId();\n\n\t\treturn {\n\t\t\thasSelection: !! getSelectionStart().clientId,\n\t\t\tinsertionPoint: getInsertionPoint(),\n\t\t\tblockOrder: getBlockOrder( root ),\n\t\t\tblockInsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t\tsectionRootClientId: root,\n\t\t\tsetInserterIsOpened:\n\t\t\t\tgetSettings().__experimentalSetIsInserterOpened,\n\t\t\tselectedBlockClientId: getSelectedBlockClientId(),\n\t\t};\n\t}, [] );\n\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\tconst { showInsertionPoint } = unlock( useDispatch( blockEditorStore ) );\n\n\t// Defer the initial rendering to avoid the jumps due to the animation.\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsReady( true );\n\t\t}, 500 );\n\t\treturn () => {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [] );\n\n\tif ( ! isReady || ! hasSelection ) {\n\t\treturn null;\n\t}\n\n\treturn [ undefined, ...blockOrder ].map( ( clientId, index ) => {\n\t\tconst shouldRenderInsertionPoint =\n\t\t\tblockInsertionPointVisible && insertionPoint?.index === index;\n\n\t\tconst previousClientId = clientId;\n\t\tconst nextClientId = blockOrder[ index ];\n\n\t\tconst isSelected =\n\t\t\tselectedBlockClientId === previousClientId ||\n\t\t\tselectedBlockClientId === nextClientId;\n\n\t\treturn (\n\t\t\t<BlockPopoverInbetween\n\t\t\t\tkey={ index }\n\t\t\t\tpreviousClientId={ previousClientId }\n\t\t\t\tnextClientId={ nextClientId }\n\t\t\t>\n\t\t\t\t{ ! shouldRenderInsertionPoint && isSelected && (\n\t\t\t\t\t<ZoomOutModeInserterButton\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tsetInserterIsOpened( {\n\t\t\t\t\t\t\t\trootClientId: sectionRootClientId,\n\t\t\t\t\t\t\t\tinsertionIndex: index,\n\t\t\t\t\t\t\t\ttab: 'patterns',\n\t\t\t\t\t\t\t\tcategory: 'all',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tshowInsertionPoint( sectionRootClientId, index, {\n\t\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockPopoverInbetween>\n\t\t);\n\t} );\n}\n\nexport default ZoomOutModeInserters;\n"],"mappings":"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","ignoreList":[]}