{"version":3,"names":["_element","require","_i18n","_components","_data","_usePatternsState","_interopRequireDefault","_blockPatternsList","_usePatternsPaging","_patternsFilter","_usePatternCategories","_utils","_store","_jsxRuntime","noop","PatternCategoryPreviews","rootClientId","onInsert","onHover","category","showTitlesAsTooltip","isZoomOutMode","useSelect","select","blockEditorStore","__unstableGetEditorMode","allPatterns","onClickPattern","usePatternsState","name","patternSyncFilter","setPatternSyncFilter","useState","patternSourceFilter","setPatternSourceFilter","availableCategories","usePatternCategories","scrollContainerRef","useRef","currentCategoryPatterns","useMemo","filter","pattern","isPatternFiltered","allPatternsCategory","myPatternsCategory","type","INSERTER_PATTERN_TYPES","user","categories","some","catName","c","includes","pagingProps","usePatternsPaging","changePage","useEffect","onSetPatternSyncFilter","useCallback","value","onSetPatternSourceFilter","jsxs","Fragment","children","__experimentalVStack","spacing","className","__experimentalHStack","jsx","FlexBlock","__experimentalHeading","size","level","as","label","PatternsFilter","length","__experimentalText","variant","__","default","ref","shownPatterns","categoryPatternsAsyncList","blockPatterns","categoryPatterns","orientation","isDraggable","patternFilter"],"sources":["@wordpress/block-editor/src/components/inserter/block-patterns-tab/pattern-category-previews.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tuseMemo,\n\tuseState,\n\tuseCallback,\n\tuseRef,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalHeading as Heading,\n\t__experimentalText as Text,\n\tFlexBlock,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport usePatternsState from '../hooks/use-patterns-state';\nimport BlockPatternsList from '../../block-patterns-list';\nimport usePatternsPaging from '../hooks/use-patterns-paging';\nimport { PatternsFilter } from './patterns-filter';\nimport { usePatternCategories } from './use-pattern-categories';\nimport {\n\tisPatternFiltered,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\nimport { store as blockEditorStore } from '../../../store';\n\nconst noop = () => {};\n\nexport function PatternCategoryPreviews( {\n\trootClientId,\n\tonInsert,\n\tonHover = noop,\n\tcategory,\n\tshowTitlesAsTooltip,\n} ) {\n\tconst isZoomOutMode = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).__unstableGetEditorMode() === 'zoom-out',\n\t\t[]\n\t);\n\tconst [ allPatterns, , onClickPattern ] = usePatternsState(\n\t\tonInsert,\n\t\trootClientId,\n\t\tcategory?.name\n\t);\n\tconst [ patternSyncFilter, setPatternSyncFilter ] = useState( 'all' );\n\tconst [ patternSourceFilter, setPatternSourceFilter ] = useState( 'all' );\n\n\tconst availableCategories = usePatternCategories(\n\t\trootClientId,\n\t\tpatternSourceFilter\n\t);\n\tconst scrollContainerRef = useRef();\n\tconst currentCategoryPatterns = useMemo(\n\t\t() =>\n\t\t\tallPatterns.filter( ( pattern ) => {\n\t\t\t\tif (\n\t\t\t\t\tisPatternFiltered(\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tpatternSourceFilter,\n\t\t\t\t\t\tpatternSyncFilter\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === allPatternsCategory.name ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcategory.name === myPatternsCategory.name &&\n\t\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === 'uncategorized' ) {\n\t\t\t\t\t// The uncategorized category should show all the patterns without any category...\n\t\t\t\t\tif ( ! pattern.categories ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// ...or with no available category.\n\t\t\t\t\treturn ! pattern.categories.some( ( catName ) =>\n\t\t\t\t\t\tavailableCategories.some( ( c ) => c.name === catName )\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn pattern.categories?.includes( category.name );\n\t\t\t} ),\n\t\t[\n\t\t\tallPatterns,\n\t\t\tavailableCategories,\n\t\t\tcategory.name,\n\t\t\tpatternSourceFilter,\n\t\t\tpatternSyncFilter,\n\t\t]\n\t);\n\n\tconst pagingProps = usePatternsPaging(\n\t\tcurrentCategoryPatterns,\n\t\tcategory,\n\t\tscrollContainerRef\n\t);\n\tconst { changePage } = pagingProps;\n\n\t// Hide block pattern preview on unmount.\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tuseEffect( () => () => onHover( null ), [] );\n\n\tconst onSetPatternSyncFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSyncFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSyncFilter, changePage ]\n\t);\n\tconst onSetPatternSourceFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSourceFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSourceFilter, changePage ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<VStack\n\t\t\t\tspacing={ 2 }\n\t\t\t\tclassName=\"block-editor-inserter__patterns-category-panel-header\"\n\t\t\t>\n\t\t\t\t<HStack>\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-category-panel-title\"\n\t\t\t\t\t\t\tsize={ 13 }\n\t\t\t\t\t\t\tlevel={ 4 }\n\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t<PatternsFilter\n\t\t\t\t\t\tpatternSyncFilter={ patternSyncFilter }\n\t\t\t\t\t\tpatternSourceFilter={ patternSourceFilter }\n\t\t\t\t\t\tsetPatternSyncFilter={ onSetPatternSyncFilter }\n\t\t\t\t\t\tsetPatternSourceFilter={ onSetPatternSourceFilter }\n\t\t\t\t\t\tscrollContainerRef={ scrollContainerRef }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t\t{ ! currentCategoryPatterns.length && (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tvariant=\"muted\"\n\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-category-no-results\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'No results found' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t</VStack>\n\t\t\t{ currentCategoryPatterns.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t{ isZoomOutMode && (\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\tsize=\"12\"\n\t\t\t\t\t\t\tas=\"p\"\n\t\t\t\t\t\t\tclassName=\"block-editor-inserter__help-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Drag and drop patterns into the canvas.' ) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t) }\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tref={ scrollContainerRef }\n\t\t\t\t\t\tshownPatterns={ pagingProps.categoryPatternsAsyncList }\n\t\t\t\t\t\tblockPatterns={ pagingProps.categoryPatterns }\n\t\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tlabel={ category.label }\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\tcategory={ category.name }\n\t\t\t\t\t\tisDraggable\n\t\t\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t\t\t\tpatternFilter={ patternSourceFilter }\n\t\t\t\t\t\tpagingProps={ pagingProps }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}