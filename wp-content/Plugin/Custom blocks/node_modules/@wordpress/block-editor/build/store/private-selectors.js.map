{"version":3,"names":["_data","require","_selectors","_utils","_utils2","_constants","_lockUnlock","_privateKeys","_getBlockSettings","isBlockInterfaceHidden","state","getLastInsertedBlocksClientIds","lastBlockInserted","clientIds","getBlockWithoutAttributes","clientId","blocks","byClientId","get","isBlockSubtreeDisabled","isChildSubtreeDisabled","childClientId","getBlockEditingMode","getBlockOrder","every","exports","getEnabledClientIdsTreeUnmemoized","rootClientId","blockOrder","result","innerBlocks","push","getEnabledClientIdsTree","createSelector","order","blockEditingModes","settings","templateLock","blockListSettings","editorMode","getSectionRootClientId","getEnabledBlockParents","ascending","getBlockParents","filter","parent","parents","getRemovalPromptData","removalPromptData","getBlockRemovalRules","blockRemovalRules","getOpenedBlockSettingsMenu","openedBlockSettingsMenu","getStyleOverrides","getClientIdsWithDescendants","clientIdMap","reduce","acc","index","styleOverrides","sort","overrideA","overrideB","_clientIdMap$clientId","_clientIdMap$clientId2","clientIdA","clientIdB","aIndex","bIndex","getRegisteredInserterMediaCategories","registeredInserterMediaCategories","getInserterMediaCategories","inserterMediaCategories","allowedMimeTypes","enableOpenverseMediaCategory","length","coreInserterMediaCategoriesNames","map","name","mergedCategories","includes","category","Object","values","some","mimeType","startsWith","mediaType","hasAllowedPatterns","createRegistrySelector","select","getAllPatterns","unlock","STORE_NAME","patterns","allowedBlockTypes","getSettings","pattern","inserter","grammar","getGrammar","checkAllowListRecursive","blockName","canInsertBlockType","getAllPatternsDependants","getInsertBlockTypeDependants","mapUserPattern","userPattern","__experimentalUserPatternCategories","id","type","INSERTER_PATTERN_TYPES","user","title","raw","categories","wp_pattern_category","catId","find","slug","content","syncStatus","wp_pattern_sync_status","getPatternBySlug","patternName","_state$settings$__exp","_state$settings$selec","_id","parseInt","slice","block","getReusableBlocks","__experimentalBlockPatterns","selectBlockPatternsKey","__experimentalReusableBlocks","_state$settings$__exp2","_state$settings$selec2","x","arr","findIndex","y","isResolvingPatterns","blockPatternsSelect","reusableBlocksSelect","reusableBlocksSelectKey","undefined","EMPTY_ARRAY","_ref","getLastFocus","lastFocus","isDragging","getExpandedBlock","expandedBlock","getContentLockingParent","current","getTemplateLock","getParentSectionBlock","isSectionBlock","sectionRootClientId","sectionClientIds","getBlockName","isNavigationMode","getTemporarilyEditingAsBlocks","temporarilyEditingAsBlocks","getTemporarilyEditingFocusModeToRevert","temporarilyEditingFocusModeRevert","getBlockStyles","styles","attributes","style","isZoomOutMode","sectionRootClientIdKey","getZoomLevel","zoomLevel","isZoomOut","getClosestAllowedInsertionPoint","blockNames","Array","isArray","areBlockNamesAllowedInClientId","currentName","parentClientId","getBlockRootClientId","getClosestAllowedInsertionPointForPattern","isAllowed","names","getInsertionPoint","insertionPoint"],"sources":["@wordpress/block-editor/src/store/private-selectors.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createSelector, createRegistrySelector } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetBlockOrder,\n\tgetBlockParents,\n\tgetBlockEditingMode,\n\tgetSettings,\n\tcanInsertBlockType,\n\tgetBlockName,\n\tgetTemplateLock,\n\tgetClientIdsWithDescendants,\n\tisNavigationMode,\n\tgetBlockRootClientId,\n} from './selectors';\nimport {\n\tcheckAllowListRecursive,\n\tgetAllPatternsDependants,\n\tgetInsertBlockTypeDependants,\n\tgetGrammar,\n} from './utils';\nimport { INSERTER_PATTERN_TYPES } from '../components/inserter/block-patterns-tab/utils';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\nimport {\n\tselectBlockPatternsKey,\n\treusableBlocksSelectKey,\n\tsectionRootClientIdKey,\n} from './private-keys';\n\nexport { getBlockSettings } from './get-block-settings';\n\n/**\n * Returns true if the block interface is hidden, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function isBlockInterfaceHidden( state ) {\n\treturn state.isBlockInterfaceHidden;\n}\n\n/**\n * Gets the client ids of the last inserted blocks.\n *\n * @param {Object} state Global application state.\n * @return {Array|undefined} Client Ids of the last inserted block(s).\n */\nexport function getLastInsertedBlocksClientIds( state ) {\n\treturn state?.lastBlockInserted?.clientIds;\n}\n\nexport function getBlockWithoutAttributes( state, clientId ) {\n\treturn state.blocks.byClientId.get( clientId );\n}\n\n/**\n * Returns true if all of the descendants of a block with the given client ID\n * have an editing mode of 'disabled', or false otherwise.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID.\n *\n * @return {boolean} Whether the block descendants are disabled.\n */\nexport const isBlockSubtreeDisabled = ( state, clientId ) => {\n\tconst isChildSubtreeDisabled = ( childClientId ) => {\n\t\treturn (\n\t\t\tgetBlockEditingMode( state, childClientId ) === 'disabled' &&\n\t\t\tgetBlockOrder( state, childClientId ).every(\n\t\t\t\tisChildSubtreeDisabled\n\t\t\t)\n\t\t);\n\t};\n\treturn getBlockOrder( state, clientId ).every( isChildSubtreeDisabled );\n};\n\nfunction getEnabledClientIdsTreeUnmemoized( state, rootClientId ) {\n\tconst blockOrder = getBlockOrder( state, rootClientId );\n\tconst result = [];\n\n\tfor ( const clientId of blockOrder ) {\n\t\tconst innerBlocks = getEnabledClientIdsTreeUnmemoized(\n\t\t\tstate,\n\t\t\tclientId\n\t\t);\n\t\tif ( getBlockEditingMode( state, clientId ) !== 'disabled' ) {\n\t\t\tresult.push( { clientId, innerBlocks } );\n\t\t} else {\n\t\t\tresult.push( ...innerBlocks );\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Returns a tree of block objects with only clientID and innerBlocks set.\n * Blocks with a 'disabled' editing mode are not included.\n *\n * @param {Object}  state        Global application state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Tree of block objects with only clientID and innerBlocks set.\n */\nexport const getEnabledClientIdsTree = createSelector(\n\tgetEnabledClientIdsTreeUnmemoized,\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t\tstate.editorMode,\n\t\tgetSectionRootClientId( state ),\n\t]\n);\n\n/**\n * Returns a list of a given block's ancestors, from top to bottom. Blocks with\n * a 'disabled' editing mode are excluded.\n *\n * @see getBlockParents\n *\n * @param {Object}  state     Global application state.\n * @param {string}  clientId  The block client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top\n *                            to bottom (false).\n */\nexport const getEnabledBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\treturn getBlockParents( state, clientId, ascending ).filter(\n\t\t\t( parent ) => getBlockEditingMode( state, parent ) !== 'disabled'\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.blocks.parents,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t]\n);\n\n/**\n * Selector that returns the data needed to display a prompt when certain\n * blocks are removed, or `false` if no such prompt is requested.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object|false} Data for removal prompt display, if any.\n */\nexport function getRemovalPromptData( state ) {\n\treturn state.removalPromptData;\n}\n\n/**\n * Returns true if removal prompt exists, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether removal prompt exists.\n */\nexport function getBlockRemovalRules( state ) {\n\treturn state.blockRemovalRules;\n}\n\n/**\n * Returns the client ID of the block settings menu that is currently open.\n *\n * @param {Object} state Global application state.\n * @return {string|null} The client ID of the block menu that is currently open.\n */\nexport function getOpenedBlockSettingsMenu( state ) {\n\treturn state.openedBlockSettingsMenu;\n}\n\n/**\n * Returns all style overrides, intended to be merged with global editor styles.\n *\n * Overrides are sorted to match the order of the blocks they relate to. This\n * is useful to maintain correct CSS cascade order.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} An array of style ID to style override pairs.\n */\nexport const getStyleOverrides = createSelector(\n\t( state ) => {\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tconst clientIdMap = clientIds.reduce( ( acc, clientId, index ) => {\n\t\t\tacc[ clientId ] = index;\n\t\t\treturn acc;\n\t\t}, {} );\n\n\t\treturn [ ...state.styleOverrides ].sort( ( overrideA, overrideB ) => {\n\t\t\t// Once the overrides Map is spread to an array, the first element\n\t\t\t// is the key, while the second is the override itself including\n\t\t\t// the clientId to sort by.\n\t\t\tconst [ , { clientId: clientIdA } ] = overrideA;\n\t\t\tconst [ , { clientId: clientIdB } ] = overrideB;\n\n\t\t\tconst aIndex = clientIdMap[ clientIdA ] ?? -1;\n\t\t\tconst bIndex = clientIdMap[ clientIdB ] ?? -1;\n\n\t\t\treturn aIndex - bIndex;\n\t\t} );\n\t},\n\t( state ) => [ state.blocks.order, state.styleOverrides ]\n);\n\n/** @typedef {import('./actions').InserterMediaCategory} InserterMediaCategory */\n/**\n * Returns the registered inserter media categories through the public API.\n *\n * @param {Object} state Editor state.\n *\n * @return {InserterMediaCategory[]} Inserter media categories.\n */\nexport function getRegisteredInserterMediaCategories( state ) {\n\treturn state.registeredInserterMediaCategories;\n}\n\n/**\n * Returns an array containing the allowed inserter media categories.\n * It merges the registered media categories from extenders with the\n * core ones. It also takes into account the allowed `mime_types`, which\n * can be altered by `upload_mimes` filter and restrict some of them.\n *\n * @param {Object} state Global application state.\n *\n * @return {InserterMediaCategory[]} Client IDs of descendants.\n */\nexport const getInserterMediaCategories = createSelector(\n\t( state ) => {\n\t\tconst {\n\t\t\tsettings: {\n\t\t\t\tinserterMediaCategories,\n\t\t\t\tallowedMimeTypes,\n\t\t\t\tenableOpenverseMediaCategory,\n\t\t\t},\n\t\t\tregisteredInserterMediaCategories,\n\t\t} = state;\n\t\t// The allowed `mime_types` can be altered by `upload_mimes` filter and restrict\n\t\t// some of them. In this case we shouldn't add the category to the available media\n\t\t// categories list in the inserter.\n\t\tif (\n\t\t\t( ! inserterMediaCategories &&\n\t\t\t\t! registeredInserterMediaCategories.length ) ||\n\t\t\t! allowedMimeTypes\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst coreInserterMediaCategoriesNames =\n\t\t\tinserterMediaCategories?.map( ( { name } ) => name ) || [];\n\t\tconst mergedCategories = [\n\t\t\t...( inserterMediaCategories || [] ),\n\t\t\t...( registeredInserterMediaCategories || [] ).filter(\n\t\t\t\t( { name } ) =>\n\t\t\t\t\t! coreInserterMediaCategoriesNames.includes( name )\n\t\t\t),\n\t\t];\n\t\treturn mergedCategories.filter( ( category ) => {\n\t\t\t// Check if Openverse category is enabled.\n\t\t\tif (\n\t\t\t\t! enableOpenverseMediaCategory &&\n\t\t\t\tcategory.name === 'openverse'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Object.values( allowedMimeTypes ).some( ( mimeType ) =>\n\t\t\t\tmimeType.startsWith( `${ category.mediaType }/` )\n\t\t\t);\n\t\t} );\n\t},\n\t( state ) => [\n\t\tstate.settings.inserterMediaCategories,\n\t\tstate.settings.allowedMimeTypes,\n\t\tstate.settings.enableOpenverseMediaCategory,\n\t\tstate.registeredInserterMediaCategories,\n\t]\n);\n\n/**\n * Returns whether there is at least one allowed pattern for inner blocks children.\n * This is useful for deferring the parsing of all patterns until needed.\n *\n * @param {Object} state               Editor state.\n * @param {string} [rootClientId=null] Target root client ID.\n *\n * @return {boolean} If there is at least one allowed pattern.\n */\nexport const hasAllowedPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tconst { getAllPatterns } = unlock( select( STORE_NAME ) );\n\t\t\tconst patterns = getAllPatterns();\n\t\t\tconst { allowedBlockTypes } = getSettings( state );\n\t\t\treturn patterns.some( ( pattern ) => {\n\t\t\t\tconst { inserter = true } = pattern;\n\t\t\t\tif ( ! inserter ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst grammar = getGrammar( pattern );\n\t\t\t\treturn (\n\t\t\t\t\tcheckAllowListRecursive( grammar, allowedBlockTypes ) &&\n\t\t\t\t\tgrammar.every( ( { name: blockName } ) =>\n\t\t\t\t\t\tcanInsertBlockType( state, blockName, rootClientId )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\t...getAllPatternsDependants( select )( state ),\n\t\t\t...getInsertBlockTypeDependants( state, rootClientId ),\n\t\t]\n\t)\n);\n\nfunction mapUserPattern(\n\tuserPattern,\n\t__experimentalUserPatternCategories = []\n) {\n\treturn {\n\t\tname: `core/block/${ userPattern.id }`,\n\t\tid: userPattern.id,\n\t\ttype: INSERTER_PATTERN_TYPES.user,\n\t\ttitle: userPattern.title.raw,\n\t\tcategories: userPattern.wp_pattern_category.map( ( catId ) => {\n\t\t\tconst category = __experimentalUserPatternCategories.find(\n\t\t\t\t( { id } ) => id === catId\n\t\t\t);\n\t\t\treturn category ? category.slug : catId;\n\t\t} ),\n\t\tcontent: userPattern.content.raw,\n\t\tsyncStatus: userPattern.wp_pattern_sync_status,\n\t};\n}\n\nexport const getPatternBySlug = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, patternName ) => {\n\t\t\t// Only fetch reusable blocks if we know we need them. To do: maybe\n\t\t\t// use the entity record API to retrieve the block by slug.\n\t\t\tif ( patternName?.startsWith( 'core/block/' ) ) {\n\t\t\t\tconst _id = parseInt(\n\t\t\t\t\tpatternName.slice( 'core/block/'.length ),\n\t\t\t\t\t10\n\t\t\t\t);\n\t\t\t\tconst block = unlock( select( STORE_NAME ) )\n\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t.find( ( { id } ) => id === _id );\n\n\t\t\t\tif ( ! block ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn mapUserPattern(\n\t\t\t\t\tblock,\n\t\t\t\t\tstate.settings.__experimentalUserPatternCategories\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t// This setting is left for back compat.\n\t\t\t\t...( state.settings.__experimentalBlockPatterns ?? [] ),\n\t\t\t\t...( state.settings[ selectBlockPatternsKey ]?.( select ) ??\n\t\t\t\t\t[] ),\n\t\t\t].find( ( { name } ) => name === patternName );\n\t\t},\n\t\t( state, patternName ) =>\n\t\t\tpatternName?.startsWith( 'core/block/' )\n\t\t\t\t? [\n\t\t\t\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t\t\t\t\t\tstate.settings.__experimentalReusableBlocks,\n\t\t\t\t  ]\n\t\t\t\t: [\n\t\t\t\t\t\tstate.settings.__experimentalBlockPatterns,\n\t\t\t\t\t\tstate.settings[ selectBlockPatternsKey ]?.( select ),\n\t\t\t\t  ]\n\t)\n);\n\nexport const getAllPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector( ( state ) => {\n\t\treturn [\n\t\t\t...unlock( select( STORE_NAME ) )\n\t\t\t\t.getReusableBlocks()\n\t\t\t\t.map( ( userPattern ) =>\n\t\t\t\t\tmapUserPattern(\n\t\t\t\t\t\tuserPattern,\n\t\t\t\t\t\tstate.settings.__experimentalUserPatternCategories\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t// This setting is left for back compat.\n\t\t\t...( state.settings.__experimentalBlockPatterns ?? [] ),\n\t\t\t...( state.settings[ selectBlockPatternsKey ]?.( select ) ?? [] ),\n\t\t].filter(\n\t\t\t( x, index, arr ) =>\n\t\t\t\tindex === arr.findIndex( ( y ) => x.name === y.name )\n\t\t);\n\t}, getAllPatternsDependants( select ) )\n);\n\nexport const isResolvingPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector( ( state ) => {\n\t\tconst blockPatternsSelect = state.settings[ selectBlockPatternsKey ];\n\t\tconst reusableBlocksSelect = state.settings[ reusableBlocksSelectKey ];\n\t\treturn (\n\t\t\t( blockPatternsSelect\n\t\t\t\t? blockPatternsSelect( select ) === undefined\n\t\t\t\t: false ) ||\n\t\t\t( reusableBlocksSelect\n\t\t\t\t? reusableBlocksSelect( select ) === undefined\n\t\t\t\t: false )\n\t\t);\n\t}, getAllPatternsDependants( select ) )\n);\n\nconst EMPTY_ARRAY = [];\n\nexport const getReusableBlocks = createRegistrySelector(\n\t( select ) => ( state ) => {\n\t\tconst reusableBlocksSelect = state.settings[ reusableBlocksSelectKey ];\n\t\treturn (\n\t\t\t( reusableBlocksSelect\n\t\t\t\t? reusableBlocksSelect( select )\n\t\t\t\t: state.settings.__experimentalReusableBlocks ) ?? EMPTY_ARRAY\n\t\t);\n\t}\n);\n\n/**\n * Returns the element of the last element that had focus when focus left the editor canvas.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object} Element.\n */\nexport function getLastFocus( state ) {\n\treturn state.lastFocus;\n}\n\n/**\n * Returns true if the user is dragging anything, or false otherwise. It is possible for a\n * user to be dragging data from outside of the editor, so this selector is separate from\n * the `isDraggingBlocks` selector which only returns true if the user is dragging blocks.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging.\n */\nexport function isDragging( state ) {\n\treturn state.isDragging;\n}\n\n/**\n * Retrieves the expanded block from the state.\n *\n * @param {Object} state Block editor state.\n *\n * @return {string|null} The client ID of the expanded block, if set.\n */\nexport function getExpandedBlock( state ) {\n\treturn state.expandedBlock;\n}\n\n/**\n * Retrieves the client ID of the ancestor block that is content locking the block\n * with the provided client ID.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {?string} Client ID of the ancestor block that is content locking the block.\n */\nexport const getContentLockingParent = ( state, clientId ) => {\n\tlet current = clientId;\n\tlet result;\n\twhile ( ! result && ( current = state.blocks.parents.get( current ) ) ) {\n\t\tif ( getTemplateLock( state, current ) === 'contentOnly' ) {\n\t\t\tresult = current;\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Retrieves the client ID of the parent section block.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {?string} Client ID of the ancestor block that is content locking the block.\n */\nexport const getParentSectionBlock = ( state, clientId ) => {\n\tlet current = clientId;\n\tlet result;\n\twhile ( ! result && ( current = state.blocks.parents.get( current ) ) ) {\n\t\tif ( isSectionBlock( state, current ) ) {\n\t\t\tresult = current;\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Retrieves the client ID is a content locking parent\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {boolean} Whether the block is a content locking parent.\n */\nexport function isSectionBlock( state, clientId ) {\n\tconst sectionRootClientId = getSectionRootClientId( state );\n\tconst sectionClientIds = getBlockOrder( state, sectionRootClientId );\n\treturn (\n\t\tgetBlockName( state, clientId ) === 'core/block' ||\n\t\tgetTemplateLock( state, clientId ) === 'contentOnly' ||\n\t\t( isNavigationMode( state ) && sectionClientIds.includes( clientId ) )\n\t);\n}\n\n/**\n * Retrieves the client ID of the block that is content locked but is\n * currently being temporarily edited as a non-locked block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} The client ID of the block being temporarily edited as a non-locked block.\n */\nexport function getTemporarilyEditingAsBlocks( state ) {\n\treturn state.temporarilyEditingAsBlocks;\n}\n\n/**\n * Returns the focus mode that should be reapplied when the user stops editing\n * a content locked blocks as a block without locking.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} The focus mode that should be re-set when temporarily editing as blocks stops.\n */\nexport function getTemporarilyEditingFocusModeToRevert( state ) {\n\treturn state.temporarilyEditingFocusModeRevert;\n}\n\n/**\n * Returns the style attributes of multiple blocks.\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} clientIds An array of block client IDs.\n *\n * @return {Object} An object where keys are client IDs and values are the corresponding block styles or undefined.\n */\nexport const getBlockStyles = createSelector(\n\t( state, clientIds ) =>\n\t\tclientIds.reduce( ( styles, clientId ) => {\n\t\t\tstyles[ clientId ] = state.blocks.attributes.get( clientId )?.style;\n\t\t\treturn styles;\n\t\t}, {} ),\n\t( state, clientIds ) => [\n\t\t...clientIds.map(\n\t\t\t( clientId ) => state.blocks.attributes.get( clientId )?.style\n\t\t),\n\t]\n);\n\n/**\n * Returns whether zoom out mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Is zoom out mode enabled.\n */\nexport function isZoomOutMode( state ) {\n\treturn state.editorMode === 'zoom-out';\n}\n\n/**\n * Retrieves the client ID of the block which contains the blocks\n * acting as \"sections\" in the editor. This is typically the \"main content\"\n * of the template/post.\n *\n * @param {Object} state Editor state.\n *\n * @return {string|undefined} The section root client ID or undefined if not set.\n */\nexport function getSectionRootClientId( state ) {\n\treturn state.settings?.[ sectionRootClientIdKey ];\n}\n\n/**\n * Returns the zoom out state.\n *\n * @param {Object} state Global application state.\n * @return {boolean} The zoom out state.\n */\nexport function getZoomLevel( state ) {\n\treturn state.zoomLevel;\n}\n\n/**\n * Returns whether the editor is considered zoomed out.\n *\n * @param {Object} state Global application state.\n * @return {boolean} Whether the editor is zoomed.\n */\nexport function isZoomOut( state ) {\n\treturn getZoomLevel( state ) < 100;\n}\n\n/**\n * Finds the closest block where the block is allowed to be inserted.\n *\n * @param {Object}            state    Editor state.\n * @param {string[] | string} name     Block name or names.\n * @param {string}            clientId Default insertion point.\n *\n * @return {string} clientID of the closest container when the block name can be inserted.\n */\nexport function getClosestAllowedInsertionPoint( state, name, clientId = '' ) {\n\tconst blockNames = Array.isArray( name ) ? name : [ name ];\n\tconst areBlockNamesAllowedInClientId = ( id ) =>\n\t\tblockNames.every( ( currentName ) =>\n\t\t\tcanInsertBlockType( state, currentName, id )\n\t\t);\n\n\t// If we're trying to insert at the root level and it's not allowed\n\t// Try the section root instead.\n\tif ( ! clientId ) {\n\t\tif ( areBlockNamesAllowedInClientId( clientId ) ) {\n\t\t\treturn clientId;\n\t\t}\n\n\t\tconst sectionRootClientId = getSectionRootClientId( state );\n\t\tif (\n\t\t\tsectionRootClientId &&\n\t\t\tareBlockNamesAllowedInClientId( sectionRootClientId )\n\t\t) {\n\t\t\treturn sectionRootClientId;\n\t\t}\n\t\treturn null;\n\t}\n\n\t// Traverse the block tree up until we find a place where we can insert.\n\tlet current = clientId;\n\twhile ( current !== null && ! areBlockNamesAllowedInClientId( current ) ) {\n\t\tconst parentClientId = getBlockRootClientId( state, current );\n\t\tcurrent = parentClientId;\n\t}\n\n\treturn current;\n}\n\nexport function getClosestAllowedInsertionPointForPattern(\n\tstate,\n\tpattern,\n\tclientId\n) {\n\tconst { allowedBlockTypes } = getSettings( state );\n\tconst isAllowed = checkAllowListRecursive(\n\t\tgetGrammar( pattern ),\n\t\tallowedBlockTypes\n\t);\n\tif ( ! isAllowed ) {\n\t\treturn null;\n\t}\n\tconst names = getGrammar( pattern ).map( ( { blockName: name } ) => name );\n\treturn getClosestAllowedInsertionPoint( state, names, clientId );\n}\n\n/**\n * Where the point where the next block will be inserted into.\n *\n * @param {Object} state\n * @return {Object} where the insertion point in the block editor is or null if none is set.\n */\nexport function getInsertionPoint( state ) {\n\treturn state.insertionPoint;\n}\n"],"mappings":"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","ignoreList":[]}