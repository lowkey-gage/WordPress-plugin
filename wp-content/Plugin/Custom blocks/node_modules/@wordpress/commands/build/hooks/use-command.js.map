{"version":3,"names":["_element","require","_data","_store","useCommand","command","registerCommand","unregisterCommand","useDispatch","commandsStore","currentCallbackRef","useRef","callback","useEffect","current","disabled","name","context","label","searchLabel","icon","keywords","args","useCommands","commands","currentCallbacksRef","forEach"],"sources":["@wordpress/commands/src/hooks/use-command.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as commandsStore } from '../store';\n\n/**\n * Attach a command to the command palette. Used for static commands.\n *\n * @param {import('../store/actions').WPCommandConfig} command command config.\n *\n * @example\n * ```js\n * import { useCommand } from '@wordpress/commands';\n * import { plus } from '@wordpress/icons';\n *\n * useCommand( {\n *     name: 'myplugin/my-command-name',\n *     label: __( 'Add new post' ),\n *\t   icon: plus,\n *     callback: ({ close }) => {\n *         document.location.href = 'post-new.php';\n *         close();\n *     },\n * } );\n * ```\n */\nexport function useCommand( command ) {\n\tconst { registerCommand, unregisterCommand } = useDispatch( commandsStore );\n\tconst currentCallbackRef = useRef( command.callback );\n\tuseEffect( () => {\n\t\tcurrentCallbackRef.current = command.callback;\n\t}, [ command.callback ] );\n\n\tuseEffect( () => {\n\t\tif ( command.disabled ) {\n\t\t\treturn;\n\t\t}\n\t\tregisterCommand( {\n\t\t\tname: command.name,\n\t\t\tcontext: command.context,\n\t\t\tlabel: command.label,\n\t\t\tsearchLabel: command.searchLabel,\n\t\t\ticon: command.icon,\n\t\t\tkeywords: command.keywords,\n\t\t\tcallback: ( ...args ) => currentCallbackRef.current( ...args ),\n\t\t} );\n\t\treturn () => {\n\t\t\tunregisterCommand( command.name );\n\t\t};\n\t}, [\n\t\tcommand.name,\n\t\tcommand.label,\n\t\tcommand.searchLabel,\n\t\tcommand.icon,\n\t\tcommand.context,\n\t\tcommand.keywords,\n\t\tcommand.disabled,\n\t\tregisterCommand,\n\t\tunregisterCommand,\n\t] );\n}\n\n/**\n * Attach multiple commands to the command palette. Used for static commands.\n *\n * @param {import('../store/actions').WPCommandConfig[]} commands Array of command configs.\n *\n * @example\n * ```js\n * import { useCommands } from '@wordpress/commands';\n * import { plus, edit } from '@wordpress/icons';\n *\n * useCommands( [\n *     {\n *         name: 'myplugin/add-post',\n *         label: __( 'Add new post' ),\n *         icon: plus,\n *         callback: ({ close }) => {\n *             document.location.href = 'post-new.php';\n *             close();\n *         },\n *     },\n *     {\n *         name: 'myplugin/edit-posts',\n *         label: __( 'Edit posts' ),\n *         icon: edit,\n *         callback: ({ close }) => {\n *             document.location.href = 'edit.php';\n *             close();\n *         },\n *     },\n * ] );\n * ```\n */\nexport function useCommands( commands ) {\n\tconst { registerCommand, unregisterCommand } = useDispatch( commandsStore );\n\tconst currentCallbacksRef = useRef( {} );\n\n\tuseEffect( () => {\n\t\tif ( ! commands ) {\n\t\t\treturn;\n\t\t}\n\t\tcommands.forEach( ( command ) => {\n\t\t\tif ( command.callback ) {\n\t\t\t\tcurrentCallbacksRef.current[ command.name ] = command.callback;\n\t\t\t}\n\t\t} );\n\t}, [ commands ] );\n\n\tuseEffect( () => {\n\t\tif ( ! commands ) {\n\t\t\treturn;\n\t\t}\n\t\tcommands.forEach( ( command ) => {\n\t\t\tif ( command.disabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tregisterCommand( {\n\t\t\t\tname: command.name,\n\t\t\t\tcontext: command.context,\n\t\t\t\tlabel: command.label,\n\t\t\t\tsearchLabel: command.searchLabel,\n\t\t\t\ticon: command.icon,\n\t\t\t\tkeywords: command.keywords,\n\t\t\t\tcallback: ( ...args ) => {\n\t\t\t\t\tconst callback =\n\t\t\t\t\t\tcurrentCallbacksRef.current[ command.name ];\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback( ...args );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\n\t\treturn () => {\n\t\t\tcommands.forEach( ( command ) => {\n\t\t\t\tunregisterCommand( command.name );\n\t\t\t} );\n\t\t};\n\t}, [ commands, registerCommand, unregisterCommand ] );\n}\n"],"mappings":"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","ignoreList":[]}